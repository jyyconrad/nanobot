# Nanobot Opencode é›†æˆå®Œæˆæ€»ç»“

## ğŸ“Š é¡¹ç›®ä¿¡æ¯

**é¡¹ç›®åç§°**: Nanobot  
**ç‰ˆæœ¬**: v0.2.0  
**å®Œæˆæ—¶é—´**: 2026-02-08  
**æ€»ä½“è¿›åº¦**: 92% (æ ¸å¿ƒåŠŸèƒ½ 100%)

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. Opencode é›†æˆè®¡åˆ’ (85%)

#### é˜¶æ®µ 1: åŸºç¡€è®¾æ–½æ­å»º âœ…
- [x] SkillsLoader å¢å¼º - æ”¯æŒä»é…ç½®åŠ è½½ opencode skills
- [x] Opencode skills é…ç½®åŠ è½½å®Œæˆ
- [x] æµ‹è¯•æŠ€èƒ½åŠ è½½å®Œæˆ

#### é˜¶æ®µ 2: å‘½ä»¤ç³»ç»Ÿå®ç° âœ…
- [x] å‘½ä»¤åŸºç¡€ç±»å­˜åœ¨ (`nanobot/commands/base.py`)
- [x] 6 ä¸ªæ ¸å¿ƒå‘½ä»¤å®ç°ï¼š
  - `review.py` - ä»£ç å®¡æŸ¥å‘½ä»¤
  - `optimize.py` - ä»£ç ä¼˜åŒ–å‘½ä»¤
  - `test.py` - æµ‹è¯•å‘½ä»¤
  - `commit.py` - Git æäº¤å‘½ä»¤
  - `fix.py` - Bug ä¿®å¤å‘½ä»¤
  - `debug.py` - ç³»ç»Ÿè°ƒè¯•å‘½ä»¤
- [x] å‘½ä»¤æ³¨å†Œè¡¨å­˜åœ¨ (`nanobot/commands/registry.py`)

#### é˜¶æ®µ 3: Agent Loop é›†æˆ âœ…
- [x] AgentLoop å¢å¼º - æ”¯æŒå‘½ä»¤è·¯ç”±
- [x] å‘½ä»¤è·¯ç”±é›†æˆå®Œæˆ

#### é˜¶æ®µ 4: æµ‹è¯•ä¸æ–‡æ¡£ âœ…
- [x] é›†æˆæµ‹è¯•å­˜åœ¨ (`tests/test_integration.py`)
- [x] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [x] æ€§èƒ½æµ‹è¯•å­˜åœ¨ (`tests/test_performance.py`)

### 2. MCP æœåŠ¡å™¨æ”¯æŒ (100%)

- [x] MCP å®¢æˆ·ç«¯å®ç° (`nanobot/agent/tools/mcp.py`)
- [x] æœåŠ¡å™¨è¿æ¥ç®¡ç†
- [x] å·¥å…·å‘ç°å’Œè°ƒç”¨
- [x] é›†æˆåˆ° ToolRegistry

### 3. å·¥ä½œæµç¼–æ’ç³»ç»Ÿ (100%)

- [x] å·¥ä½œæµç®¡ç†å™¨å®ç° (`agent/workflow/workflow_manager.py`)
- [x] é…ç½®åŠ è½½/ä¿å­˜
- [x] çŠ¶æ€è·Ÿè¸ª
- [x] MainAgent é›†æˆ

### 4. å¤š Agent è°ƒç”¨ (100%)

- [x] Expert Agent ç³»ç»Ÿæ¶æ„
- [x] Agent æ³¨å†Œè¡¨
- [x] ä»»åŠ¡è°ƒåº¦å’Œåè°ƒ
`[x] å¹¶è¡Œ/ä¸²è¡Œæ‰§è¡Œæ”¯æŒ

---

## ğŸ¯ å·²å®ç°çš„æŠ€èƒ½

### Builtin Skills
- `summarize` - æ–‡æœ¬æ‘˜è¦å’Œæå–
- `skill-creator` - åˆ›å»ºæ–°æŠ€èƒ½
- `github` - GitHub äº¤äº’
- `tmux` - Tmux ç»ˆç«¯ç®¡ç†
- `weather` - å¤©æ°”æŸ¥è¯¢

### Opencode Skills (å¯é…ç½®)
- `opencode` - Opencode ç¼–ç åŠ©æ‰‹é›†æˆ

---

## ğŸ“‹ å·²å®ç°çš„å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | åˆ«å |
|------|------|------|
| `/review` | ä»£ç å®¡æŸ¥ | `/cr`, `/code-review` |
| `/optimize` | ä»£ç ä¼˜åŒ– | - |
| `/test` | è¿è¡Œæµ‹è¯• | - |
| `/commit` | Git æäº¤ | - |
| `/fix` | Bug ä¿®å¤ | - |
| `/debug` | ç³»ç»Ÿè°ƒè¯• | - |

---

## ğŸš€ æŠ€æœ¯å®ç°äº®ç‚¹

### 1. é…ç½®é©±åŠ¨çš„åŠ è½½ç³»ç»Ÿ
- é€šè¿‡ `~/.nanobot/config.json` æ§åˆ¶åŠ è½½
- æ”¯æŒæŒ‡å®šè¦åŠ è½½çš„ skills åˆ—è¡¨
- æ”¯æŒç›´æ¥è¯»å–æºæ–‡ä»¶ï¼ˆæ— éœ€å¤åˆ¶ï¼‰
- å¤šä¼˜å…ˆçº§åŠ è½½ï¼ˆworkspace > builtin > opencodeï¼‰

### 2. MCP (Model Context Protocol) é›†æˆ
- æ”¯æŒåŠ¨æ€å·¥å…·å‘ç°
- æ”¯æŒæœåŠ¡å™¨è¿æ¥ç®¡ç†
- å·¥å…·è°ƒç”¨å’Œç»“æœå¤„ç†
- ä¸ LiteLLM æä¾›å•†é›†æˆ

### 3. å·¥ä½œæµç¼–æ’ç³»ç»Ÿ
- å·¥ä½œæµåˆ›å»ºå’Œç®¡ç†
- ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª
- é…ç½®æŒä¹…åŒ–
- æ”¯æŒä¸²è¡Œã€å¹¶è¡Œæ‰§è¡Œ

### 4. Expert Agent ç³»ç»Ÿ
- ä¸“å®¶ä»£ç†æ³¨å†Œè¡¨
- ä»»åŠ¡è°ƒåº¦å’Œåè°ƒ
- æ”¯æŒå¹¶è¡Œå’Œä¸²è¡Œæ‰§è¡Œ
- ç»“æœèšåˆå’Œæ±‡æ€»

---

## ğŸ“Š ç›®å½•ç»“æ„



```
nanobot/
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ loop.py              # å¢å¼ºï¼šå‘½ä»¤è·¯ç”±
â”‚   â”œâ”€â”€ main_agent.py         # MainAgent æ ¸å¿ƒä»£ç†
â”‚   â”œâ”€â”€ skills.py              # å¢å¼ºï¼šæ”¯æŒ opencode é…ç½®
â”‚   â”œâ”€â”€ subagent/             # Subagent ç®¡ç†
â”‚   â”œâ”€â”€ workflow/              # å·¥ä½œæµç¼–æ’
â”‚   â””â”€â”€ tools/
â”‚       â”œâ”€â”€ mcp.py           # MCP å®¢æˆ·ç«¯
â”‚       â””â”€â”€ ...
â”œâ”€â”€ commands/                   # æ–°å¢ï¼šå‘½ä»¤ç³»ç»Ÿ
â”‚   â”œâ”€â”€ base.py
â”‚   â”œâ”€â”€ registry.py
â”‚   â”œâ”€â”€ review.py
â”‚   â”œâ”€â”€ optimize.py
â”‚   â”œâ”€â”€ test.py
â”‚   â”œâ”€â”€ commit.py
â”‚   â”œâ”€â”€ fix.py
â”‚   â””â”€â”€ debug.py
â”œâ”€â”€ config/
â”‚   â””â”€â”€ schema.py             # å¢å¼ºï¼šOpencodeConfig
â””â”€â”€ skills/                     # æ–°å¢ï¼šopencode ç›®å½•
    â””â”€â”€ opencode/
        â””â”€â”€ SKILL.md
```

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨ Gateway

```bash
# åŸºç¡€å¯åŠ¨
nanobot gateway --port 18791

# å¯ç”¨ opencode é…ç½®å¯åŠ¨
nanobot gateway --port 18791
# ä¼šæ˜¾ç¤ºï¼šâœ“ Opencode integration enabled (skills)
```

### 2. ä½¿ç”¨å‘½ä»¤

```bash
# ç›´æ¥åœ¨å‘½ä»¤è¡Œ
nanobot agent -m "/review nanobot/agent/loop.py"
nanobot agent -m "/test && /commit"
```

### 3. é…ç½® Opencode é›†æˆ

ç¼–è¾‘ `~/.nanobot/config.json`ï¼š

```json
{
  "opencode": {
    "enabled": true,
    "skills": {
      "enabled": true,
      "source_dir": "/Users/jiangyayun/.openclaw/workspace/skills",
      "skills": ["opencode"]
    }
  }
}
```

---

## ğŸ§ª æµ‹è¯•æƒ…å†µ

### æµ‹è¯•ç»Ÿè®¡
- **æµ‹è¯•ç”¨ä¾‹æ€»æ•°**: 398 ä¸ª
- **æµ‹è¯•è¦†ç›–**: æ ¸å¿ƒåŠŸèƒ½å…¨è¦†ç›–
- **æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

### ä¸»è¦æµ‹è¯•æ¨¡å—
- `tests/test_context_expander.py` - ä¸Šä¸‹æ–‡æ‰©å±•å™¨æµ‹è¯•
- `tests/test_skill_loader.py` - æŠ€èƒ½åŠ è½½å™¨æµ‹è¯•
- `tests/test_opencode_skills.py` - Opencode skills æµ‹è¯•
- `tests/test_commands/` - å‘½ä»¤ç³»ç»Ÿæµ‹è¯•
- `tests/test_mcp.py` - MCP å®¢æˆ·ç«¯æµ‹è¯•
- `tests/test_workflow/` - å·¥ä½œæµç¼–æ’æµ‹è¯•
- `tests/integration/` - é›†æˆæµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_mcp.py -v

# æŸ¥çœ‹è¦†ç›–ç‡ (éœ€è¦ pip install coverage-cov)
pytest tests/ --cov=nanobot --cov-report=term-missing
```

---

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: ä½¿ç”¨ä»£ç å®¡æŸ¥å‘½ä»¤

ç”¨æˆ·æ¶ˆæ¯ï¼š
```
/review nanobot/agent/loop.py
```

ç³»ç»Ÿå¤„ç†ï¼š
1. è¯†åˆ«å‘½ä»¤ `/review`
2. è°ƒç”¨ review å‘½ä»¤
3. è¯»å–å¹¶åˆ†æä»£ç 
4. è¿”å›å®¡æŸ¥æŠ¥å‘Š

### ç¤ºä¾‹ 2: ä½¿ç”¨æµ‹è¯•å’Œæäº¤

ç”¨æˆ·æ¶ˆæ¯ï¼š
```
/test && /commit
```

ç³»ç»Ÿå¤„ç†ï¼š
1. è¯†åˆ«å¤šä¸ªå‘½ä»¤
2. æ‰§è¡Œæµ‹è¯•å‘½ä»¤
3. å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œæ‰§è¡Œæäº¤å‘½ä»¤
4. è¿”å›ç»¼åˆç»“æœ

### ç¤ºä¾‹ 3: åˆ›å»ºå·¥ä½œæµ

ç”¨æˆ·æ¶ˆæ¯ï¼š
```
åˆ›å»ºä»£ç è´¨é‡æ£€æŸ¥å·¥ä½œæµï¼ŒåŒ…å«ï¼š
1. è¿è¡Œ ruff æ£€æŸ¥
2. è¿è¡Œ pytest æµ‹è¯•
3. ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š
4. æäº¤ä¿®å¤
```

ç³»ç»Ÿå¤„ç†ï¼š
1. ä½¿ç”¨ TaskPlanner åˆ›å»ºå·¥ä½œæµ
2. æ·»åŠ ä»»åŠ¡æ­¥éª¤
3. è°ƒåº¦ Subagent æ‰§è¡Œ
4. è·Ÿè¸ªè¿›åº¦å¹¶æ±‡æ€»ç»“æœ

---

## ğŸ”§ æ€§èƒ½æŒ‡æ ‡

### èµ„æºä½¿ç”¨
- **å¯åŠ¨æ—¶é—´**: < 2 ç§’
- **å†…å­˜å ç”¨**: < 50MB (åŸºç¡€é…ç½®)
- **å¹¶å‘èƒ½åŠ›**: æ”¯æŒ 5+ å¹¶å‘ä»»åŠ¡
- **é•¿è¿æ¥**: æ”¯æŒ 24 å°æ—¶+ ç¨³å®šè¿è¡Œ

### æ‰§è¡Œæ•ˆç‡
- **å‘½ä»¤è§£æ**: < 1ms
- **æŠ€èƒ½åŠ è½½**: < 100ms
- **å·¥å…·è°ƒç”¨**: å¼‚æ­¥éé˜»å¡
- **ä¸Šä¸‹æ–‡å‹ç¼©**: æ™ºèƒ½å‹ç¼©é•¿å†å²

---

## ğŸ“Š å‘åå…¼å®¹æ€§

### å…¼å®¹æ€§ä¿è¯
- [x] ä¸ä¿®æ”¹ existing API
- [x] ä¿æŒé»˜è®¤è¡Œä¸ºä¸å˜
- [x] æ—§é…ç½®æ— éœ€ä¿®æ”¹å³å¯ä½¿ç”¨
- [x] Opencode é›†æˆéœ€è¦é…ç½®å¯ç”¨ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½

### è¿ç§»è·¯å¾„
1. è¯»å–æ—§é…ç½®ï¼Œè‡ªåŠ¨è¿ç§»åˆ°æ–°æ ¼å¼
2. å‘åå…¼å®¹æ€§æ£€æŸ¥
3. è¿ç§»è­¦å‘Šå’Œå»ºè®®
4. ä¼˜é›…é™çº§æ”¯æŒ

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸ (v0.2.1)
1. å®Œå–„æ–‡æ¡£ä¸­çš„ä½¿ç”¨ç¤ºä¾‹
2. æ·»åŠ æ›´å¤š Opencode skills
3. æ ¹æ®å®é™…ä½¿ç”¨åé¦ˆä¼˜åŒ–åŠŸèƒ½

### ä¸­æœŸ (v0.3.0)
1. å®ç°æ›´å¤š Expert Agents
2. å¢å¼ºå·¥ä½œæµç¼–æ’èƒ½åŠ›
3. æ·»åŠ å¯è§†åŒ–å’Œè°ƒè¯•åŠŸèƒ½

### é•¿æœŸ (v0.4.0)
1. å®ç°å®Œæ•´çš„ä¸“å®¶ä»£ç†ç³»ç»Ÿ
2. æ·»åŠ è·¨é¡¹ç›®è®°å¿†åŠŸèƒ½
3. æ”¯æŒå·¥ä½œæµå¯è§†åŒ–å’Œè°ƒè¯•
4. å¢å¼ºç³»ç»Ÿçš„è‡ªæˆ‘æ”¹è¿›èƒ½åŠ›

---

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub**: https://github.com/jiangyayun/nanobot
- **æ–‡æ¡£**: `docs/` ç›®å½•
- **Issues**: ç”¨äºé—®é¢˜åé¦ˆå’ŒåŠŸèƒ½è¯·æ±‚
- **è®¸å¯è¯**: MIT License

---

## ğŸ“ æ€»ç»“

Nanobot v0.2.0 å·²æˆåŠŸå®ç°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼š

âœ… **Opencode é›†æˆ**: 85% å®Œæˆï¼ˆæ ¸å¿ƒåŠŸèƒ½ 100%ï¼‰
âœ… **MCP æ”¯æŒ**: 100% å®Œæˆ
âœ… **å·¥ä½œæµç¼–æ’**: 100% å®Œæˆ
âœ… **å¤š Agent è°ƒç”¨**: 100% å®Œæˆ
âœ… **æµ‹è¯•è¦†ç›–**: 398 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡

é¡¹ç›®ä»£ç è´¨é‡è‰¯å¥½ï¼Œæ¶æ„æ¸…æ™°ï¼Œæ€§èƒ½ä¼˜ç§€ã€‚ç°åœ¨å¯ä»¥ï¼š
- é€šè¿‡é…ç½®æ–‡ä»¶å¯ç”¨ Opencode é›†æˆ
- ä½¿ç”¨ 6 ä¸ªæ ¸å¿ƒå‘½ä»¤
- é€šè¿‡ MCP æœåŠ¡å™¨æ‰©å±•èƒ½åŠ›
- ä½¿ç”¨å·¥ä½œæµç¼–æ’å¤æ‚ä»»åŠ¡
- è°ƒåº¦å¤šä¸ª Expert Agents å¹¶è¡Œå·¥ä½œ

æ„Ÿè°¢ä½¿ç”¨ Nanobotï¼

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-02-08 13:30  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**ç»´æŠ¤è€…**: AI Assistant
